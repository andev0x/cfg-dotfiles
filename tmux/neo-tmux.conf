
### ========================
### General Settings
### Anvndev
### ========================

# Enable mouse support
set -g mouse on

# Increase scrollback history
set -g history-limit 100000

# Start window and pane index at 1
set -g base-index 1
setw -g pane-base-index 1

# Automatically renumber windows
set -g renumber-windows on

# Enable focus events (critical for Neovim)
set-option -g focus-events on

# True color support
set -g default-terminal "tmux-256color"
set -as terminal-overrides ",xterm-256color:Tc"

# Use Vi-style keys in copy mode
setw -g mode-keys vi


### ========================
### Status Bar Appearance
### ========================

# Position at the TOP for a modern look
set -g status-position bottom
set -g status-interval 5
set -g status-justify left
set -g status-style bg=default,fg=white

# Colors (Catppuccin-inspired palette)
# Green: #a6e3a1, Blue: #89b4fa, Peach: #fab387, Surface: #313244, Text: #cdd6f4

# Left side: Session Name (Compact pill)
set -g status-left-length 30
set -g status-left "#[fg=#a6e3a1,bg=default]#[fg=#1e1e2e,bg=#a6e3a1,bold]#[fg=#a6e3a1,bg=#313244]#[fg=#cdd6f4,bg=#313244] #S #[fg=#313244,bg=default] "

# Window List Styling
setw -g window-status-separator ""

# Inactive Window: Blue Index icon | Dark background name
setw -g window-status-format "#[fg=#89b4fa,bg=default] #[fg=#1e1e2e,bg=#89b4fa]#I#[fg=#89b4fa,bg=#313244]#[fg=#cdd6f4,bg=#313244] #W #[fg=#313244,bg=default]"

# Active Window: Peach Index icon | Dark background name
setw -g window-status-current-format "#[fg=#fab387,bg=default] #[fg=#1e1e2e,bg=#fab387]#I#[fg=#fab387,bg=#313244]#[fg=#cdd6f4,bg=#313244,bold] #W #[fg=#313244,bg=default]"

# Right side: Icon (Colored) | Data (Dark/Neutral)
set -g status-right-length 150
set -g status-right "#[fg=#f9e2af,bg=default]#[fg=#1e1e2e,bg=#f9e2af]#[fg=#f9e2af,bg=#313244]#[fg=#cdd6f4,bg=#313244] #(if git -C #{pane_current_path} rev-parse --is-inside-work-tree >/dev/null 2>&1; then git -C #{pane_current_path} rev-parse --abbrev-ref HEAD; else basename #{pane_current_path}; fi) #[fg=#313244,bg=default] \
#[fg=#94e2d5,bg=default]#[fg=#1e1e2e,bg=#94e2d5]#[fg=#94e2d5,bg=#313244]█#[fg=#cdd6f4,bg=#313244] #{cpu_percentage} #[fg=#313244,bg=default] \
#[fg=#f5c2e7,bg=default]#[fg=#1e1e2e,bg=#f5c2e7]#[fg=#f5c2e7,bg=#313244]█#[fg=#cdd6f4,bg=#313244] #(whoami) #[fg=#313244,bg=default] \
#[fg=#a6e3a1,bg=default]#[fg=#1e1e2e,bg=#a6e3a1]󱛡#[fg=#a6e3a1,bg=#313244]█#[fg=#cdd6f4,bg=#313244] %H:%M #[fg=#313244,bg=default]"


### ========================
### Splits & Navigation
### ========================

# Split panes
bind | split-window -h
bind - split-window -v

# Pane navigation (Alt + hjkl)
bind -n M-h select-pane -L
bind -n M-l select-pane -R
bind -n M-j select-pane -D
bind -n M-k select-pane -U

# Pane resizing (Alt + Shift + hjkl)
bind -n M-H resize-pane -L 5
bind -n M-L resize-pane -R 5
bind -n M-J resize-pane -D 2
bind -n M-K resize-pane -U 2


### ========================
### Quality of Life
### ========================

# Reload tmux config
bind r source-file ~/.tmux.conf \; display-message "Config reloaded!"

# Kill commands
bind x kill-pane
bind X kill-window
bind Q kill-session

# Copy selection to macOS clipboard
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"


### ========================
### Plugins (TPM)
### ========================

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-cpu'

# Auto-restore last session
set -g @continuum-restore 'on'
set -g @resurrect-strategy-nvim 'session'

# Initialize TPM (must be last)
run '~/.tmux/plugins/tpm/tpm'
